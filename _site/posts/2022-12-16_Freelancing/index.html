<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="William Becker">
<meta name="dcterms.date" content="2022-12-16">

<title>William Becker - Freelance data science: a two-year review</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">William Becker</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects/index.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications/index.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/bluefoxr/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/webecker/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Freelance data science: a two-year review</h1>
            <p class="subtitle lead"></p><p>The story of a two-year freelance journey and its pros and cons.</p><p></p>
                                <div class="quarto-categories">
                <div class="quarto-category">Meta</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>William Becker </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 16, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><img src="featured.jpg" class="img-fluid"></p>
<p>I started working as a freelancer back in October 2020. Since then I’ve worked on all kinds of projects and it’s been a real journey: sometimes hectic, sometimes slow, but always unpredictable. After more than two years, I thought a long and rambling review was in order, so here it is!</p>
<section id="a-new-era-sunrise" class="level2">
<h2 class="anchored" data-anchor-id="a-new-era-sunrise">A New Era :sunrise:</h2>
<p>Up until March 2020 I worked at the European Commission’s <a href="https://joint-research-centre.ec.europa.eu/index_en">Joint Research Centre</a> (JRC). I worked there for nine years, and it was a really fantastic experience supporting European policy making, doing research, meeting and working with great people, and living in a rather nice corner of Italy near the mountains and the lakes. Unfortunately, while the JRC is great for temporary contracts, permanent contracts are much harder to come by. And by early 2020 my time was up, and as a Brexit refugee I was also excluded from applying to the Commission at all. Thanks Boris. :clown:</p>
<p>March 2020 also coincided with the start of the pandemic and a long lockdown in Italy, so my first months outside the JRC were not the honeymoon of casual family time, projects and sports that I had envisaged. Anyway, for various reasons it was clear that we (me and my family) would stay in the area for a while yet. And so after a few months I began looking for work options.</p>
<p>The problem is that living in a small town in a mostly rural area in North Italy, on-site work options in my line of work basically consist of:</p>
<ol type="1">
<li>The JRC</li>
<li>See 1<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
</ol>
<p>And so, this was how I found myself looking at freelance work. One of the few positive outcomes of the pandemic was that remote work became much more normalised, and so this was more feasible than previously. And so I began my journey as a self-styled “freelance data scientist”.</p>
</section>
<section id="the-journey-tent" class="level2">
<h2 class="anchored" data-anchor-id="the-journey-tent">The Journey :tent:</h2>
<p>It really has been a Journey. Coming out of the JRC I realised I had a mixed bag of skills and experience: technical skills in statistics, indicators, modelling and sensitivity analysis; but also a lot of experience in various areas of policy - in sustainable development, connectivity, budgeting, and countless other areas that I had worked in. I had also written a lot of academic papers, organised and participated in numerous scientific conferences, and somehow built up a fairly wide network of friends and colleagues that I had worked with over the years.</p>
<p>So, if I was to become a freelancer, what kind of work should I actually do?</p>
<p>Luckily, work came my way and answered this question for me. I was first contracted by the JRC to build an R package for composite indicators, which turned into the rather successful <a href="https://bluefoxr.github.io/COINr/">COINr package</a>. During this time I also began working with WIPO to build a similar custom R package for the <a href="https://www.globalinnovationindex.org/Home">Global Innovation Index</a>, and with UNIDO to help build the <a href="https://hub.unido.org/qi4sd/">Quality Infrastructure for Sustainable Development Index</a>.</p>
<p>I learned an enormous amount during these three projects. Whereas programming had been an occasional past-time in my time at the JRC, now it became my main work. I had to quickly improve my programming skills to a more professional level - learning about GitHub, version control, functional and object-oriented programming, unit testing, continuous integration and other concepts that I had little knowledge of before.</p>
<p>Along the way I also worked on some smaller projects, including the WEF Nexus Index. There I met the data visualisation experts at OneTandem, with whom I also began to work on other projects. Together with another colleague Hedvig Norlén, we launched the <a href="https://compositeindicators.com/">compositeindicators.com</a> website where we offer services related to composite indicator construction.</p>
<p>In the end, 2021 got a bit too busy so I decided to take a break in early 2022, and I had a relatively quiet period up until early Summer when things started heating up again. And now, at the end of 2022 I have loads of work in the pipeline and I’m busy. So busy in fact, that I am procrastinating by writing a long blog post about the last two years!</p>
<p>But apart from all the professional skills that I have learned, I also really learned a lot about freelancing in general. And that’s why I thought I’d talk about some pros and cons. So here they are.</p>
</section>
<section id="the-good" class="level2">
<h2 class="anchored" data-anchor-id="the-good">The Good</h2>
<p><strong>I get to work on all kinds of topics</strong> :rainbow:</p>
<p>Probably the best thing about my work is the variety. I have been lucky to work on so many topics, and with so many interesting people, over the last two years. Here are some topics that I’ve worked as a freelancer, or am about to begin working on:</p>
<ul>
<li>Innovation</li>
<li>Quality infrastruture</li>
<li>Sustainable development</li>
<li>Bioeconomy</li>
<li>Medical diagnosis</li>
<li>Water/Energy/Food</li>
<li>International connectivity</li>
<li>Migration</li>
<li>Air pollution</li>
<li>Employee skills</li>
<li>Impact assessment</li>
<li>Sensitivity analysis</li>
</ul>
<p>That’s quite a good list! Every time I start on a new project I’m fascinated to learn about the new topic. Ok, some topics are more interesting than others, but to me it’s a great privilege to be able to work in all these different fields. It’s the great thing about stats and data science, it can really be applied to almost anything! And my “clients” are spread over five continents at the last count.</p>
<p><strong>I am <em>Il Capo</em> of my time</strong> :hourglass:</p>
<p>Working freelance is extremely flexible. I can work to my own timetable, I can take days off without asking anyone. I can get up and work in the middle of the night if I want to (I don’t, but maybe that option will come in handy one day…?). This does also come with downsides (see later) but the good part is that, as long as I get the job done for my clients, and work the time I am paid to work, I can completely manage my own time. For example, in quieter periods I have sometimes just worked mornings and spent the afternoons doing other things like sport, house and family tasks, music etc. I can also work from anywhere, in any country.</p>
<p><strong>I am <em>El Jefe</em> of my work</strong> :tophat:</p>
<p>Another great thing is that I get to decide which work to do, and I can use whatever tools I like to get the job done (as long as my clients agree). Working in the European Commission, you are restricted to using a lot of corporate tools and you may have to ask to install new software, and so on. Now, I do all my work on open-source software, I have everything saved on the cloud so I can access all of my work, even on my phone. Also, if I don’t like a project, I can turn it down.</p>
<p><strong>There’s less admin</strong> :page_facing_up:</p>
<p>Ok this is not completely true (see later) but some admin-related tasks disappear. I don’t have to produce briefings and I don’t have to attend many meetings. Of the meetings I do attend, they are usually short and well-focused. I don’t have to have performance review conversations, and I manage all my own IT, billing, leave and other things. I recall many difficult interactions with the more bureaucratic arms of the EC, although it’s just a fact of working in a very big organisation. Still, I don’t miss that part at all!</p>
</section>
<section id="the-bad" class="level2">
<h2 class="anchored" data-anchor-id="the-bad">The Bad</h2>
<p>Ok, now let’s see the other side of the coin!</p>
<p><strong>I’m a Lone Wolf</strong> :wolf:</p>
<p>Although I work <em>for</em> many people, and I have even worked <em>with</em> some great colleagues, there’s no denying that freelancing is a bit of a lonely business. I work completely remotely, which is also a good thing, but it means that most days I work on my own. Of course, I have my family around, and I have meetings every now and then with clients, but I’m a social animal (half of the time) and I do miss being part of a team, working together with colleagues and friends <em>in person</em> and having coffee breaks and lunches together.</p>
<p>When you work in an organisation and in a team there is also a feeling of being “part of something”, that you miss as a freelancer. I’m a mercenary, a hired gun - I do the work I’m paid to do and then when it’s done, I move onto something else. This is also a good thing, but I guess like the classic wandering cowboys, you do miss the feel of having a home! Oh yes this is getting poetic!</p>
<p><strong>Workload goes up and down</strong> :roller_coaster:</p>
<p>Like any job, freelancing workload goes through quiet and busy periods. The difference is that if you work for an employer (i.e.&nbsp;a “normal job”) you are paid the same regardless. You have a fixed salary per month, and it is the employer’s responsibility to ensure that your workload is not too much or too little.</p>
<p>As a freelancer, if you have less work, you have less money. So if you go through a quiet period you have to spend time looking for work. At the other end of the spectrum, it is easy to overload yourself with too many contracts and end up having to work during the evenings as well. It’s very difficult to get exactly the right amount of work, with contracts overlapping, starting and stopping, and meeting deadlines on various projects. This is something that gets easier with experience but is still a challenge.</p>
<p><strong>No work, no pay</strong> :gun:</p>
<p>If I’m not working on a paid project then I’m not earning money. This is obvious but comes with some implications. First, if you are sick, you don’t get paid. Luckily I’m not often sick, but if I were to be sick for a long period of time, I would have no income. There’s no safety net.</p>
<p>Second is that you can’t easily do unpaid but interesting activities that you might have done as an employee. For example, when I was working at the JRC I could spend some time on academic research, and I went to many conferences. I also frequently gave talks at seminars, lectures at universities and so on. This was possible because I could do it during my working time, and the JRC would pay for me to travel to conferences (within reason). As a freelancer, I have also been invited to give talks at workshops and to collaborate on papers but usually I have to turn these down. If I spend the morning giving a talk, or working on a paper, I have to give up half a day’s pay. This is OK sometimes but hard to justify in many cases. And so, I end up focusing mostly on paid work.</p>
<p>And finally of course, if I don’t find contracts, I don’t get paid. This means that there is very little job security. True, so far I have not had trouble finding work, but who knows for the future?</p>
<p><strong>There’s more admin</strong> :page_facing_up:</p>
<p>Did I say there was less admin? Well, actually I’m not sure. There are a lot of admin things to do as a freelancer. You have to draw up contracts and proposals for contracts, bill clients, talk to accountants, deduct expenses, and carefully monitor your time on each project, tracking the progress of deliverables and making sure you complete the work in the required time. There is also a lot of deliberation about how to define deliverables, whether to charge by deliverables or by time, estimating costs and so on. Actually it all adds up rather quickly.</p>
<p><strong>Too much flexibilty?</strong> :worried:</p>
<p>Flexibility is great, but the price is that work and home life can blur so much that you find yourself in a permanent limbo between an “on” and “off” state. This is compounded by the fact that I work at home. When I began freelancing, I often worked in the evenings to “get a bit extra done”, knowing that whenever I work, my time is paid. However, I learned after a while that you have to try to draw a line between your working day and your non-work time. Now, I work fairly rigidly 8am-5pm, but I still occasionally find myself working a little in the evenings, or else drifting to non-work tasks during the day. I guess it just requires a measure of time management and discipline.</p>
</section>
<section id="the-summary" class="level2">
<h2 class="anchored" data-anchor-id="the-summary">The Summary</h2>
<p>Freelancing has been great for me and a huge learning experience. I think the main good things are the variety, the flexibility, and the sense of being in charge of your own destiny. On the other hand, it is quite a solitary experience, you have to be quite disciplined with your time and it comes with little job security.</p>
<p>Apart from learning all kinds of professional skills, I also learned some overall lessons. First is that contacts are all-important. I’m not a networker in the sense of someone who sidles up to “important” people at conferences or cold-calls potential clients. But I am someone who is very open to working with anyone on any kind of project, as long as it is interesting. This attitude, I think, has paid off: when I left the JRC I had worked with many people in many places and this led to recommendations and work. The fact is that if you get the work done to a good standard, and you are an easy person to work with, over time this gets noticed and you don’t have to aggressively network to build up a good list of contacts.</p>
<p>Another thing I learned is that academic papers are not very important outside of academia. Probably not a surprise to anyone, but unless you are planning on working in academia, no one really cares about how many citations you have!</p>
<p>I also learned that having a broad profile has its pros and cons. Whereas I tend to think of myself as a “jack of all trades”, quite frequently I think I come across (to people who don’t know me) as a rather a “master of none”. I think that’s due to the fact that I have always loved learning new things and working in new fields, but try putting this on a CV when applying for a job. Usually employers like for people to fit into neat categories, and if your CV is very mixed, its hard to make head or tail of it. I still think a broad profile is a strength, but communicating it as a strength is really a challenge.</p>
<p>I’ll end this extremely long post with a last positive thought about freelancing. Working at the JRC, like any big organisation, can feel a bit like being in a bubble. This is well-known in the JRC, and its the result of bring a lot of sciency people together from different corners of Europe on temporary contracts - naturally they tend to socialise together and talk about JRC stuff, and it can be easy to not get so involved in the outside world. At least for the years that you are working there, the JRC offers a great level of job security and benefits. In short, the bubble is quite cozy.</p>
<p>When I left the JRC, therefore, it was also a test of whether I could stand on my own feet in the cold world outside of the bubble. And I’m glad to say after two years that I can. I have managed to get regular and interesting work, and I could probably carry on doing this almost indefinitely. So, although I may at some point seek the job security and the company of friends and colleagues back in Commission or another big organisation, I do at least know that, if the bubble bursts, I’ll be absolutely fine!</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>To be fair, you could also travel to Milan every day, but… nah.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, William Becker</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>